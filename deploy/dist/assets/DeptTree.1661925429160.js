import{_ as D,d as E,H as p,l as I,k as F,m as R,f as H,w as o,r as a,o as M,b as s,h as l,a2 as f,b1 as P,b2 as U,i as r}from"./index.1661925429160.js";import{t as j}from"./dept.1661925429160.js";const q={class:"card-header"},z={class:"tree-h-flex"},G={class:"tree-h-left"},J={class:"tree-h-right"},K=r("\u5168\u90E8\u5C55\u5F00"),L=r("\u5168\u90E8\u6298\u53E0"),O=r("\u6839\u8282\u70B9"),Q=r("\u5237\u65B0"),S={style:{"margin-bottom":"45px"}},W=E({__name:"DeptTree",props:{maInit:Boolean},emits:["node-click"],setup(m,{expose:h,emit:i}){const v=m,c=p(""),n=p(),x={children:"children",label:"name"};I(c,e=>{n.value.filter(e)});const w=(e,t)=>e?t.deptName.includes(e):!0,u=F({data:[],willInit:!0}),N=async e=>{if(e=="expandAll")for(let t=0;t<n.value.store._getAllNodes().length;t++)n.value.store._getAllNodes()[t].expanded=!0;else if(e=="collapseAll")for(let t=0;t<n.value.store._getAllNodes().length;t++)n.value.store._getAllNodes()[t].expanded=!1;else e=="refresh"?await _():e=="rootNode"&&i("node-click",{deptId:"",name:""})},_=async()=>{j().then(e=>{u.data=e.data})};R(()=>{v.maInit==!1&&_()});const g=e=>{i("node-click",{id:e.id,name:e.deptName})};return h({init:async()=>{await _()}}),(e,t)=>{const y=a("el-input"),b=a("el-icon"),k=a("el-button"),d=a("el-dropdown-item"),A=a("el-dropdown-menu"),C=a("el-dropdown"),B=a("el-tree"),T=a("el-card");return M(),H(T,{class:"box-card",style:{height:"100%"},"body-style":"height: 100%;overflow: auto"},{header:o(()=>[s("div",q,[s("div",z,[s("div",G,[l(y,{"prefix-icon":f(P),modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=V=>c.value=V),placeholder:"\u90E8\u95E8\u540D\u79F0"},null,8,["prefix-icon","modelValue"])]),s("div",J,[l(C,{onCommand:N},{dropdown:o(()=>[l(A,null,{default:o(()=>[l(d,{command:"expandAll"},{default:o(()=>[K]),_:1}),l(d,{command:"collapseAll"},{default:o(()=>[L]),_:1}),l(d,{command:"rootNode"},{default:o(()=>[O]),_:1}),l(d,{command:"refresh"},{default:o(()=>[Q]),_:1})]),_:1})]),default:o(()=>[l(k,{style:{"margin-left":"8px",width:"34px"}},{default:o(()=>[l(b,{class:"el-icon--center"},{default:o(()=>[l(f(U))]),_:1})]),_:1})]),_:1})])])])]),default:o(()=>[s("div",S,[l(B,{ref_key:"treeRef",ref:n,class:"filter-tree",data:u.data,props:x,"filter-node-method":w,onNodeClick:g},null,8,["data"])])]),_:1})}}});var $=D(W,[["__scopeId","data-v-5a3bf8aa"]]);export{$ as default};
