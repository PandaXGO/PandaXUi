var M=Object.defineProperty;var O=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var T=(e,r,a)=>r in e?M(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,v=(e,r)=>{for(var a in r||(r={}))H.call(r,a)&&T(e,a,r[a]);if(O)for(var a of O(r))q.call(r,a)&&T(e,a,r[a]);return e};import{I as R}from"./index.166192542916026.js";import{t as K,u as z,a as P}from"./menu.1661925429160.js";import{_ as W,H as j,k as G,p as J,a as V,h as l,w as u,a2 as Q,M as h,r as p,aC as X,o as n,y as Y,i as g,t as y,b as C,F as _,e as b,f as i,A as f,g as Z}from"./index.1661925429160.js";import"./getStyleSheets.1661925429160.js";const $={name:"editMenu",components:{IconSelector:R},props:{title:{type:String,default:()=>""}},setup(){const{proxy:e}=Z(),r=j(null),a=G({isShowDialog:!1,loading:!1,ruleForm:{menuId:0,menuName:"",menuType:"",parentId:0,component:"",path:"",sort:1,status:"",title:"",icon:"",isHide:"",isKeepAlive:"",isAffix:"",isLink:"",isIframe:"",permission:"",remark:""},isHideOptions:[],statusOptions:[],menuTypeOptions:[],yesOrNoOptions:[],menuOptions:[],ruleRules:{menuName:[{required:!0,message:"\u83DC\u5355\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],parentId:[{required:!0,message:"\u7236\u83DC\u5355\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],menuType:[{required:!0,message:"\u83DC\u5355\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u83DC\u5355\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u83DC\u5355\u987A\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),c=()=>{console.log(a.ruleForm.isLink)},B=d=>{d.menuId&&d.menuId!=null&&d.menuId!=0?a.ruleForm=d:(t(),a.ruleForm.parentId=d.parentId),a.isShowDialog=!0,a.loading=!1,e.getDicts("sys_show_hide").then(s=>{a.isHideOptions=s.data}),e.getDicts("sys_normal_disable").then(s=>{a.statusOptions=s.data}),e.getDicts("sys_menu_type").then(s=>{a.menuTypeOptions=s.data}),e.getDicts("sys_num_yes_no").then(s=>{a.yesOrNoOptions=s.data}),K().then(s=>{a.menuOptions=[];const F={menuId:0,menuName:"\u4E3B\u7C7B\u76EE",children:[]};F.children=s.data,a.menuOptions.push(F)})},D=d=>{t(),e.mittBus.emit("onEditMenuModule",d),a.isShowDialog=!1},k=()=>{D(),t()},m=()=>{const d=Q(r);!d||d.validate(s=>{s&&(a.ruleForm.component==""&&(a.ruleForm.menuType=="F"?a.ruleForm.component="":a.ruleForm.component="Layout"),a.loading=!0,a.ruleForm.menuId!=null&&a.ruleForm.menuId!=0?z(a.ruleForm).then(F=>{h.success("\u4FEE\u6539\u6210\u529F"),a.loading=!1,D()}):P(a.ruleForm).then(F=>{h.success("\u65B0\u589E\u6210\u529F"),a.loading=!1,D()}))})},t=()=>{a.ruleForm.menuId=0,a.ruleForm.menuName="",a.ruleForm.menuType="",a.ruleForm.parentId=0,a.ruleForm.component="",a.ruleForm.path="",a.ruleForm.sort=1,a.ruleForm.status="",a.ruleForm.title="",a.ruleForm.icon="",a.ruleForm.isHide="",a.ruleForm.isKeepAlive="",a.ruleForm.isAffix="",a.ruleForm.isLink="",a.ruleForm.isIframe="",a.ruleForm.permission="",a.ruleForm.remark=""};return v({ruleFormRef:r,clear:c,openDialog:B,closeDialog:D,onCancel:k,onSubmit:m},J(a))}},x={class:"system-menu-container"},ee={style:{"font-size":"large"}},ue=C("i",{class:"fa fa-exclamation-circle ml10 mt10"},null,-1),le=C("i",{class:"fa fa-exclamation-circle ml10 mt10"},null,-1),oe=C("i",{class:"fa fa-exclamation-circle ml10 mt10"},null,-1),ae=C("i",{class:"fa fa-exclamation-circle ml10 mt10"},null,-1),re={class:"dialog-footer"},te=g("\u53D6 \u6D88"),ne=g("\u7F16 \u8F91");function se(e,r,a,c,B,D){const k=p("el-cascader"),m=p("el-form-item"),t=p("el-col"),d=p("el-radio"),s=p("el-radio-group"),F=p("el-input"),N=p("el-input-number"),U=p("IconSelector"),A=p("el-tooltip"),E=p("el-row"),w=p("el-form"),I=p("el-button"),L=p("el-dialog"),S=X("drag");return n(),V("div",x,[l(L,{modelValue:e.isShowDialog,"onUpdate:modelValue":r[15]||(r[15]=o=>e.isShowDialog=o),width:"769px",center:""},{header:u(()=>[Y((n(),V("div",ee,[g(y(a.title),1)])),[[S,[".system-menu-container .el-dialog",".system-menu-container .el-dialog__header"]]])]),footer:u(()=>[C("span",re,[l(I,{onClick:c.onCancel},{default:u(()=>[te]),_:1},8,["onClick"]),l(I,{type:"primary",onClick:c.onSubmit,loading:e.loading},{default:u(()=>[ne]),_:1},8,["onClick","loading"])])]),default:u(()=>[l(w,{model:e.ruleForm,rules:e.ruleRules,ref:"ruleFormRef","label-width":"80px"},{default:u(()=>[l(E,{gutter:35},{default:u(()=>[l(t,{span:24},{default:u(()=>[l(m,{label:"\u4E0A\u7EA7\u83DC\u5355",prop:"parentId"},{default:u(()=>[l(k,{modelValue:e.ruleForm.parentId,"onUpdate:modelValue":r[0]||(r[0]=o=>e.ruleForm.parentId=o),options:e.menuOptions,class:"w100",props:{label:"menuName",value:"menuId",checkStrictly:!0,emitPath:!1},clearable:"",filterable:"",placeholder:"\u9009\u62E9\u4E0A\u7EA7\u83DC\u5355","show-all-levels":!1},null,8,["modelValue","options"])]),_:1})]),_:1}),l(t,{span:24},{default:u(()=>[l(m,{label:"\u83DC\u5355\u7C7B\u578B",prop:"menuType"},{default:u(()=>[l(s,{modelValue:e.ruleForm.menuType,"onUpdate:modelValue":r[1]||(r[1]=o=>e.ruleForm.menuType=o)},{default:u(()=>[(n(!0),V(_,null,b(e.menuTypeOptions,o=>(n(),i(d,{key:o.dictValue,label:o.dictValue},{default:u(()=>[g(y(o.dictLabel),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(t,{xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>[l(m,{label:"\u83DC\u5355\u540D\u79F0",prop:"menuName"},{default:u(()=>[l(F,{modelValue:e.ruleForm.menuName,"onUpdate:modelValue":r[2]||(r[2]=o=>e.ruleForm.menuName=o),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(t,{xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>[l(m,{label:"\u83DC\u5355\u6392\u5E8F",prop:"sort"},{default:u(()=>[l(N,{modelValue:e.ruleForm.sort,"onUpdate:modelValue":r[3]||(r[3]=o=>e.ruleForm.sort=o),placeholder:"\u83DC\u5355\u6392\u5E8F",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e.ruleForm.menuType!="F"?(n(),i(t,{key:0,xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>[l(m,{label:"\u83DC\u5355\u56FE\u6807",prop:"icon"},{default:u(()=>[l(U,{placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u56FE\u6807",modelValue:e.ruleForm.icon,"onUpdate:modelValue":r[4]||(r[4]=o=>e.ruleForm.icon=o),type:"all"},null,8,["modelValue"])]),_:1})]),_:1})):f("",!0),l(t,{xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>[l(E,{gutter:8},{default:u(()=>[l(t,{span:22},{default:u(()=>[l(m,{label:"\u6743\u9650\u6807\u8BC6",prop:"permission"},{default:u(()=>[l(F,{modelValue:e.ruleForm.permission,"onUpdate:modelValue":r[5]||(r[5]=o=>e.ruleForm.permission=o),placeholder:"\u8DEF\u7531\u6743\u9650\u6807\u8BC6",clearable:"",disabled:e.ruleForm.menuType=="M"},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(t,{span:2},{default:u(()=>[l(A,{content:"\u8DEF\u7531\u6743\u9650\u6807\u8BC6\uFF08\u591A\u4E2A\u8BF7\u7528\u9017\u53F7\u9694\u5F00\uFF09",placement:"top"},{default:u(()=>[ue]),_:1})]),_:1})]),_:1})]),_:1}),e.ruleForm.menuType!="F"?(n(),i(t,{key:1,xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>[l(E,{gutter:8},{default:u(()=>[l(t,{span:22},{default:u(()=>[l(m,{label:"\u7EC4\u4EF6\u5730\u5740"},{default:u(()=>[l(F,{modelValue:e.ruleForm.component,"onUpdate:modelValue":r[6]||(r[6]=o=>e.ruleForm.component=o),placeholder:"\u7EC4\u4EF6\u5730\u5740",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(t,{span:2},{default:u(()=>[l(A,{content:"\u83DC\u5355\u5BF9\u5E94\u7684\u5177\u4F53vue\u9875\u9762\u6587\u4EF6\u8DEF\u5F84views\u7684\u4E0B\u7EA7\u8DEF\u5F84/system/user/index,\u5916\u94FE\u8BF7\u586B\u5199/layout/routerView/link\uFF0C\u5185\u94FE\u8BF7\u586B\u5199/layout/routerView/iframes",placement:"top"},{default:u(()=>[le]),_:1})]),_:1})]),_:1})]),_:1})):f("",!0),e.ruleForm.menuType!="F"?(n(),i(t,{key:2,xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>[l(E,{gutter:8},{default:u(()=>[l(t,{span:22},{default:u(()=>[l(m,{label:"\u8DEF\u7531\u5730\u5740"},{default:u(()=>[l(F,{modelValue:e.ruleForm.path,"onUpdate:modelValue":r[7]||(r[7]=o=>e.ruleForm.path=o),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u5730\u5740",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(t,{span:2},{default:u(()=>[l(A,{content:"\u8981\u548C\u9875\u9762name\u4FDD\u6301\u4E00\u81F4:\u4F8B\u5982 /system/role",placement:"top"},{default:u(()=>[oe]),_:1})]),_:1})]),_:1})]),_:1})):f("",!0),l(t,{xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>[l(m,{label:"\u83DC\u5355\u72B6\u6001",prop:"status"},{default:u(()=>[l(s,{modelValue:e.ruleForm.status,"onUpdate:modelValue":r[8]||(r[8]=o=>e.ruleForm.status=o)},{default:u(()=>[(n(!0),V(_,null,b(e.statusOptions,o=>(n(),i(d,{key:o.dictValue,label:o.dictValue},{default:u(()=>[g(y(o.dictLabel),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e.ruleForm.menuType!="F"?(n(),i(t,{key:3,xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>[l(m,{label:"\u662F\u5426\u9690\u85CF"},{default:u(()=>[l(s,{modelValue:e.ruleForm.isHide,"onUpdate:modelValue":r[9]||(r[9]=o=>e.ruleForm.isHide=o)},{default:u(()=>[(n(!0),V(_,null,b(e.isHideOptions,o=>(n(),i(d,{key:o.dictValue,label:o.dictValue},{default:u(()=>[g(y(o.dictLabel),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):f("",!0),e.ruleForm.menuType!="F"?(n(),i(t,{key:4,xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>[l(m,{label:"\u662F\u5426\u7F13\u5B58"},{default:u(()=>[l(s,{modelValue:e.ruleForm.isKeepAlive,"onUpdate:modelValue":r[10]||(r[10]=o=>e.ruleForm.isKeepAlive=o)},{default:u(()=>[(n(!0),V(_,null,b(e.yesOrNoOptions,o=>(n(),i(d,{key:o.dictValue,label:o.dictValue},{default:u(()=>[g(y(o.dictLabel),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):f("",!0),e.ruleForm.menuType!="F"?(n(),i(t,{key:5,xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>[l(E,{gutter:8},{default:u(()=>[l(t,{span:22},{default:u(()=>[l(m,{label:"\u662F\u5426\u56FA\u5B9A"},{default:u(()=>[l(s,{modelValue:e.ruleForm.isAffix,"onUpdate:modelValue":r[11]||(r[11]=o=>e.ruleForm.isAffix=o)},{default:u(()=>[(n(!0),V(_,null,b(e.yesOrNoOptions,o=>(n(),i(d,{key:o.dictValue,label:o.dictValue},{default:u(()=>[g(y(o.dictLabel),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(t,{span:2},{default:u(()=>[e.ruleForm.menuType!="F"?(n(),i(A,{key:0,content:"\u662F\u5426\u8981\u56FA\u5B9A\u5230tag\u5934\u90E8",placement:"top"},{default:u(()=>[ae]),_:1})):f("",!0)]),_:1})]),_:1})]),_:1})):f("",!0),e.ruleForm.menuType!="F"?(n(),i(t,{key:6,xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>[l(m,{label:"\u662F\u5426\u5185\u5D4C"},{default:u(()=>[l(s,{modelValue:e.ruleForm.isIframe,"onUpdate:modelValue":r[12]||(r[12]=o=>e.ruleForm.isIframe=o)},{default:u(()=>[(n(!0),V(_,null,b(e.yesOrNoOptions,o=>(n(),i(d,{key:o.dictValue,label:o.dictValue},{default:u(()=>[g(y(o.dictLabel),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):f("",!0),e.ruleForm.menuType!="F"?(n(),i(t,{key:7,xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>[l(m,{label:"\u94FE\u63A5\u5730\u5740"},{default:u(()=>[l(F,{modelValue:e.ruleForm.isLink,"onUpdate:modelValue":r[13]||(r[13]=o=>e.ruleForm.isLink=o),placeholder:"\u5916\u94FE/\u5185\u5D4C\u65F6\u94FE\u63A5\u5730\u5740\uFF08http:xxx.com\uFF09",clear:c.clear,clearable:""},null,8,["modelValue","clear"])]),_:1})]),_:1})):f("",!0),l(t,{xs:24,sm:24,md:24,lg:24,xl:24},{default:u(()=>[l(m,{label:"\u5907\u6CE8"},{default:u(()=>[l(F,{modelValue:e.ruleForm.remark,"onUpdate:modelValue":r[14]||(r[14]=o=>e.ruleForm.remark=o),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8\u5185\u5BB9",clearable:"",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}var fe=W($,[["render",se]]);export{fe as default};
