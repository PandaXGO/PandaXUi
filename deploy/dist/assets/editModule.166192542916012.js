var T=Object.defineProperty;var h=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var V=(o,t,e)=>t in o?T(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,b=(o,t)=>{for(var e in t||(t={}))k.call(t,e)&&V(o,e,t[e]);if(h)for(var e of h(t))S.call(t,e)&&V(o,e,t[e]);return o};import{u as N,a as O}from"./notice.1661925429160.js";import{t as w}from"./dept.1661925429160.js";import{E as M}from"./index.166192542916034.js";import{_ as R,H as U,k as q,p as L,a as F,h as n,w as u,a2 as W,M as I,r,aC as z,o as f,y as H,i as g,t as P,b as $,F as j,e as G,f as J,g as K}from"./index.1661925429160.js";const Q={name:"editMenu",components:{Editor:M},props:{title:{type:String,default:()=>""}},setup(){const{proxy:o}=K(),t=U(null),e=q({isShowDialog:!1,loading:!1,ruleForm:{noticeId:0,title:"",noticeType:"",deptId:0,content:""},noticeTypeOptions:[],deptOptions:[],ruleRules:{title:[{required:!0,message:"\u516C\u544A\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],noticeType:[{required:!0,message:"\u516C\u544A\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),m=l=>{l.noticeId&&l.noticeId!=null&&l.noticeId!=""?(e.ruleForm=l,e.ruleForm.noticeId=l.noticeId,e.ruleForm.title=l.title,e.ruleForm.noticeType=l.noticeType,e.ruleForm.deptId=l.deptId,e.ruleForm.content=l.content):(s(),e.ruleForm.content=""),e.isShowDialog=!0,e.loading=!1,o.getDicts("sys_notice_type").then(i=>{e.noticeTypeOptions=i.data}),w().then(i=>{e.deptOptions=[];const c={deptId:0,deptName:"\u5168\u90E8\u90E8\u95E8",children:[]};c.children=i.data,e.deptOptions.push(c)})},E=l=>{e.ruleForm.content=l},p=l=>{o.mittBus.emit("onEditNoticeModule",l),e.isShowDialog=!1},_=()=>{p()},d=()=>{const l=W(t);!l||l.validate(i=>{i&&(e.loading=!0,e.ruleForm.noticeId!=null&&e.ruleForm.noticeId!=0?N(e.ruleForm).then(c=>{I.success("\u4FEE\u6539\u6210\u529F"),e.loading=!1,p(e.ruleForm)}):O(e.ruleForm).then(c=>{I.success("\u65B0\u589E\u6210\u529F"),e.loading=!1,p(e.ruleForm)}))})},s=()=>{e.ruleForm.noticeId=0,e.ruleForm.title="",e.ruleForm.noticeType="",e.ruleForm.deptId=0,e.ruleForm.content=""};return b({ruleFormRef:t,openDialog:m,closeDialog:p,onCancel:_,initForm:s,onSubmit:d,getWangEditorValue:E},L(e))}},X={class:"system-notice-container"},Y={style:{"font-size":"large"}},Z={class:"dialog-footer"},x=g("\u53D6 \u6D88"),ee=g("\u786E \u5B9A");function oe(o,t,e,m,E,p){const _=r("el-input"),d=r("el-form-item"),s=r("el-col"),l=r("el-row"),i=r("el-option"),c=r("el-select"),D=r("el-cascader"),C=r("Editor"),v=r("el-form"),y=r("el-button"),A=r("el-dialog"),B=z("drag");return f(),F("div",X,[n(A,{modelValue:o.isShowDialog,"onUpdate:modelValue":t[4]||(t[4]=a=>o.isShowDialog=a),width:"769px",center:""},{header:u(()=>[H((f(),F("div",Y,[g(P(e.title),1)])),[[B,[".system-notice-container .el-dialog",".system-notice-container .el-dialog__header"]]])]),footer:u(()=>[$("span",Z,[n(y,{onClick:m.onCancel},{default:u(()=>[x]),_:1},8,["onClick"]),n(y,{type:"primary",onClick:m.onSubmit,loading:o.loading},{default:u(()=>[ee]),_:1},8,["onClick","loading"])])]),default:u(()=>[n(v,{model:o.ruleForm,rules:o.ruleRules,ref:"ruleFormRef","label-width":"100px"},{default:u(()=>[n(l,{class:"mb20"},{default:u(()=>[n(s,{span:24},{default:u(()=>[n(d,{label:"\u516C\u544A\u6807\u9898",prop:"title"},{default:u(()=>[n(_,{modelValue:o.ruleForm.title,"onUpdate:modelValue":t[0]||(t[0]=a=>o.ruleForm.title=a),placeholder:"\u8BF7\u8F93\u5165\u516C\u544A\u6807\u9898"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),n(l,{class:"mb20"},{default:u(()=>[n(s,{span:12},{default:u(()=>[n(d,{label:"\u516C\u544A\u7C7B\u578B",prop:"noticeType"},{default:u(()=>[n(c,{modelValue:o.ruleForm.noticeType,"onUpdate:modelValue":t[1]||(t[1]=a=>o.ruleForm.noticeType=a),placeholder:"\u8BF7\u9009\u62E9"},{default:u(()=>[(f(!0),F(j,null,G(o.noticeTypeOptions,a=>(f(),J(i,{key:a.dictValue,label:a.dictLabel,value:a.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),n(s,{span:12},{default:u(()=>[n(d,{label:"\u901A\u77E5\u90E8\u95E8",prop:"deptId"},{default:u(()=>[n(D,{modelValue:o.ruleForm.deptId,"onUpdate:modelValue":t[2]||(t[2]=a=>o.ruleForm.deptId=a),options:o.deptOptions,class:"w100",props:{value:"deptId",label:"deptName",checkStrictly:!0,emitPath:!1},clearable:"",placeholder:"\u9009\u62E9\u901A\u77E5\u90E8\u95E8","show-all-levels":!1},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1}),n(s,{span:24},{default:u(()=>[n(d,{label:"\u901A\u77E5\u5185\u5BB9",prop:"content"},{default:u(()=>[n(C,{modelValue:o.ruleForm.content,"onUpdate:modelValue":t[3]||(t[3]=a=>o.ruleForm.content=a)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}var re=R(Q,[["render",oe]]);export{re as default};
