var U=Object.defineProperty;var k=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var j=(o,u,t)=>u in o?U(o,u,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[u]=t,q=(o,u)=>{for(var t in u||(u={}))M.call(u,t)&&j(o,t,u[t]);if(k)for(var t of k(u))K.call(u,t)&&j(o,t,u[t]);return o};import{$ as D,_ as H,H as W,k as X,m as Y,P as Z,p as $,a as h,h as e,w as a,g as x,N as P,M as S,r as s,aC as G,o as p,aD as ee,F as T,e as z,f as C,b as f,y as v,i as m,t as _,z as oe,A as ae}from"./index.1661925429160.js";function te(o){return D({url:"/log/logJob/list",method:"get",params:o})}function le(o){return D({url:"/log/logJob/"+o,method:"delete"})}function ue(){return D({url:"/log/logJob/all",method:"delete"})}const ne={name:"JobLog",setup(){const{proxy:o}=x(),u=W(null),t=X({total:0,tableData:[],loading:!0,ids:[],single:!0,multiple:!0,title:"",open:!1,modelForm:{},jobGroupOptions:[],JobOptions:[],statusOptions:[],queryParams:{pageNum:1,pageSize:10,name:void 0,jobGroup:void 0,status:void 0}}),d=()=>{t.queryParams.name=void 0,t.queryParams.jobGroup=void 0,t.queryParams.status=void 0,c()},c=()=>{t.loading=!0,te(t.queryParams).then(l=>{t.tableData=l.data.data,t.total=l.data.total,t.loading=!1})},A=l=>{const r=l.logId||t.ids;P({message:'\u662F\u5426\u786E\u8BA4\u5220\u9664\u5B9A\u65F6\u4EFB\u52A1\u7F16\u53F7\u4E3A"'+r+'"\u7684\u6570\u636E\u9879?',title:"\u8B66\u544A",showCancelButton:!0,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){return le(r).then(()=>{c(),S.success("\u5220\u9664\u6210\u529F")})})},w=()=>{P({message:"\u662F\u5426\u786E\u8BA4\u6E05\u7A7A\u6240\u6709\u8C03\u5EA6\u65E5\u5FD7\u6570\u636E\u9879?",title:"\u8B66\u544A",showCancelButton:!0,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){return ue()}).then(()=>{c(),S.success("\u6E05\u7A7A\u6210\u529F")})},i=l=>{t.ids=l.map(r=>r.logId),t.single=l.length!=1,t.multiple=!l.length},E=l=>{t.queryParams.pageSize=l,c()},y=l=>{t.queryParams.pageNum=l,c()},F=(l,r)=>o.selectDictLabel(t.statusOptions,l.status),g=(l,r)=>o.selectDictLabel(t.jobGroupOptions,l.jobGroup),B=l=>{t.open=!0,t.modelForm=l};return Y(()=>{c(),o.getDicts("sys_normal_disable").then(l=>{t.statusOptions=l.data}),o.getDicts("sys_job_group").then(l=>{t.jobGroupOptions=l.data})}),Z(()=>{}),q({ruleFormRef:u,resetQuery:d,handleQuery:c,handleClean:w,statusFormat:F,jobGroupFormat:g,handleView:B,handleSelectionChange:i,handleCurrentChange:y,handleSizeChange:E,onTabelRowDel:A},$(t))}},re={class:"app-container"},se=m(" \u641C\u7D22 "),de=m(" \u91CD\u7F6E "),ie={class:"card-header"},me=f("span",{class:"card-header-text"},"\u4EFB\u52A1\u65E5\u5FD7",-1),pe=m(" \u5220\u9664 "),ce=m(" \u6E05\u7A7A "),ge=m(" \u8BE6\u7EC6 "),_e={key:0},Fe={key:1},be={class:"dialog-footer"},fe=m("\u5173 \u95ED");function he(o,u,t,d,c,A){const w=s("el-input"),i=s("el-form-item"),E=s("el-option"),y=s("el-select"),F=s("SvgIcon"),g=s("el-button"),B=s("el-form"),l=s("el-card"),r=s("el-table-column"),I=s("el-tag"),L=s("el-table"),N=s("el-divider"),O=s("el-pagination"),b=s("el-col"),J=s("el-row"),R=s("el-dialog"),V=G("auth"),Q=G("loading");return p(),h("div",re,[e(l,{shadow:"always"},{default:a(()=>[e(B,{model:o.queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:a(()=>[e(i,{label:"\u4EFB\u52A1\u540D\u79F0",prop:"jobName"},{default:a(()=>[e(w,{placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u540D\u79F0\u6A21\u7CCA\u67E5\u8BE2",clearable:"",onKeyup:ee(d.handleQuery,["enter"]),style:{width:"240px"},modelValue:o.queryParams.name,"onUpdate:modelValue":u[0]||(u[0]=n=>o.queryParams.name=n)},null,8,["onKeyup","modelValue"])]),_:1}),e(i,{label:"\u4EFB\u52A1\u7EC4\u540D",prop:"jobGroup"},{default:a(()=>[e(y,{modelValue:o.queryParams.jobGroup,"onUpdate:modelValue":u[1]||(u[1]=n=>o.queryParams.jobGroup=n),placeholder:"\u8BF7\u9009\u62E9\u4EFB\u52A1\u7EC4\u540D",clearable:""},{default:a(()=>[(p(!0),h(T,null,z(o.jobGroupOptions,n=>(p(),C(E,{key:n.dictValue,label:n.dictLabel,value:n.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"\u4EFB\u52A1\u72B6\u6001",prop:"status"},{default:a(()=>[e(y,{modelValue:o.queryParams.status,"onUpdate:modelValue":u[2]||(u[2]=n=>o.queryParams.status=n),placeholder:"\u8BF7\u9009\u62E9\u4EFB\u52A1\u72B6\u6001",clearable:""},{default:a(()=>[(p(!0),h(T,null,z(o.statusOptions,n=>(p(),C(E,{key:n.dictValue,label:n.dictLabel,value:n.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,null,{default:a(()=>[e(g,{type:"primary",plain:"",onClick:d.handleQuery},{default:a(()=>[e(F,{name:"elementSearch"}),se]),_:1},8,["onClick"]),e(g,{onClick:d.resetQuery},{default:a(()=>[e(F,{name:"elementRefresh"}),de]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),e(l,{class:"box-card"},{header:a(()=>[f("div",ie,[me,f("div",null,[v((p(),C(g,{type:"danger",plain:"",disabled:o.multiple,onClick:d.onTabelRowDel},{default:a(()=>[e(F,{name:"elementDelete"}),pe]),_:1},8,["disabled","onClick"])),[[V,"log:job:delete"]]),v((p(),C(g,{type:"danger",plain:"",onClick:d.handleClean},{default:a(()=>[e(F,{name:"elementDelete"}),ce]),_:1},8,["onClick"])),[[V,"log:job:clean"]])])])]),default:a(()=>[v((p(),C(L,{data:o.tableData,onSelectionChange:d.handleSelectionChange},{default:a(()=>[e(r,{type:"selection",width:"55",align:"center"}),e(r,{label:"\u65E5\u5FD7\u7F16\u53F7",width:"80",align:"center",prop:"logId"}),e(r,{label:"\u4EFB\u52A1\u540D\u79F0",align:"center",prop:"name","show-overflow-tooltip":!0}),e(r,{label:"\u4EFB\u52A1\u7EC4\u540D",align:"center",prop:"jobGroup",formatter:d.jobGroupFormat,"show-overflow-tooltip":!0},null,8,["formatter"]),e(r,{label:"\u8C03\u7528\u76EE\u6807",align:"center",prop:"invokeTarget","show-overflow-tooltip":!0}),e(r,{label:"\u65E5\u5FD7\u4FE1\u606F",align:"center",prop:"logInfo","show-overflow-tooltip":!0}),e(r,{label:"\u6267\u884C\u72B6\u6001",align:"center",prop:"status"},{default:a(n=>[e(I,{type:n.row.status==="0"?"success":"warning","disable-transitions":""},{default:a(()=>[m(_(d.statusFormat(n.row)||"-- --"),1)]),_:2},1032,["type"])]),_:1}),e(r,{label:"\u6267\u884C\u65F6\u95F4",align:"center",prop:"createTime",width:"180"},{default:a(n=>[f("span",null,_(o.dateStrFormat(n.row.createTime)),1)]),_:1}),e(r,{label:"\u64CD\u4F5C",align:"center","class-name":"small-padding fixed-width"},{default:a(n=>[e(g,{text:"",type:"primary",onClick:Ce=>d.handleView(n.row)},{default:a(()=>[e(F,{name:"elementView"}),ge]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[Q,o.loading]]),v(f("div",null,[e(N),e(O,{background:"",total:o.total,"current-page":o.queryParams.pageNum,"page-size":o.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:d.handleSizeChange,onCurrentChange:d.handleCurrentChange},null,8,["total","current-page","page-size","onSizeChange","onCurrentChange"])],512),[[oe,o.total>0]])]),_:1}),e(R,{title:"\u8C03\u5EA6\u65E5\u5FD7\u8BE6\u7EC6",modelValue:o.open,"onUpdate:modelValue":u[4]||(u[4]=n=>o.open=n),width:"700px",center:"","append-to-body":""},{footer:a(()=>[f("div",be,[e(g,{onClick:u[3]||(u[3]=n=>o.open=!1)},{default:a(()=>[fe]),_:1})])]),default:a(()=>[e(B,{ref:"ruleFormRef",model:o.modelForm,"label-width":"100px"},{default:a(()=>[e(J,null,{default:a(()=>[e(b,{span:12},{default:a(()=>[e(i,{label:"\u65E5\u5FD7\u5E8F\u53F7\uFF1A"},{default:a(()=>[m(_(o.modelForm.logId),1)]),_:1})]),_:1}),e(b,{span:12},{default:a(()=>[e(i,{label:"\u4EFB\u52A1\u5206\u7EC4\uFF1A"},{default:a(()=>[m(_(o.modelForm.jobGroup),1)]),_:1})]),_:1}),e(b,{span:12},{default:a(()=>[e(i,{label:"\u4EFB\u52A1\u540D\u79F0\uFF1A"},{default:a(()=>[m(_(o.modelForm.name),1)]),_:1})]),_:1}),e(b,{span:12},{default:a(()=>[e(i,{label:"\u6267\u884C\u65F6\u95F4\uFF1A"},{default:a(()=>[m(_(o.modelForm.createTime),1)]),_:1})]),_:1}),e(b,{span:12},{default:a(()=>[e(i,{label:"\u8C03\u7528\u65B9\u6CD5\uFF1A"},{default:a(()=>[m(_(o.modelForm.invokeTarget),1)]),_:1})]),_:1}),e(b,{span:12},{default:a(()=>[e(i,{label:"\u65E5\u5FD7\u4FE1\u606F\uFF1A"},{default:a(()=>[m(_(o.modelForm.logInfo),1)]),_:1})]),_:1}),e(b,{span:24},{default:a(()=>[e(i,{label:"\u6267\u884C\u72B6\u6001\uFF1A"},{default:a(()=>[o.modelForm.status==0?(p(),h("div",_e,"\u6B63\u5E38")):o.modelForm.status==1?(p(),h("div",Fe,"\u5931\u8D25")):ae("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}var Be=H(ne,[["render",he]]);export{Be as default};
