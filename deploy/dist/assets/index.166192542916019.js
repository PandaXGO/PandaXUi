var W=Object.defineProperty;var I=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var P=(t,n,r)=>n in t?W(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,z=(t,n)=>{for(var r in n||(n={}))G.call(n,r)&&P(t,r,n[r]);if(I)for(var r of I(n))J.call(n,r)&&P(t,r,n[r]);return t};import{_ as K,H as U,k as X,m as Y,P as Z,p as x,a as M,h as e,w as o,g as $,a2 as ee,M as O,N,r as s,aC as T,o as c,F as j,e as L,f,b as h,y,i as g,t as te,A as le,z as ae}from"./index.1661925429160.js";import{E as ue,l as oe,d as ne,c as se,a as re}from"./editModule.16619254291603.js";const de={name:"index",components:{EditModule:ue},setup(){const{proxy:t}=$(),n=U(),r=U(),l=X({loading:!0,debugOpen:!1,ids:[],single:!0,multiple:!0,title:"",tableData:[],total:0,statusOptions:[],mailOptions:[],debugForm:{to:"",subject:"",body:""},queryParams:{pageNum:1,pageSize:10,category:void 0,status:void 0},debugRules:{to:[{required:!0,message:"\u8054\u7CFB\u4EBA\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],subject:[{required:!0,message:"\u4E3B\u9898\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],body:[{required:!0,message:"\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),_=()=>{l.loading=!0,oe(l.queryParams).then(a=>{l.tableData=a.data.data,l.total=a.data.total,l.loading=!1})},q=()=>{l.queryParams.category=void 0,l.queryParams.status=void 0,_()},D=a=>{l.queryParams.pageNum=a,_()},B=a=>{l.queryParams.pageSize=a,_()},b=a=>t.selectDictLabel(l.statusOptions,a.status),p=a=>t.selectDictLabel(l.mailOptions,a.category),d=a=>{a=[],l.title="\u6DFB\u52A0ResEmails",n.value.openDialog(a)},E=a=>{l.title="\u4FEE\u6539ResEmails",n.value.openDialog(a)},v=a=>{l.debugOpen=!0,l.debugForm.mailId=a.mailId},i=()=>{const a=ee(r);!a||a.validate(m=>{m&&ne(l.debugForm).then(R=>{O.success("\u6D4B\u8BD5\u6210\u529F"),V()})})},V=()=>{l.debugOpen=!1,l.debugForm={}},w=a=>{let m=a.status==="0"?"\u542F\u7528":"\u505C\u7528";N({message:'\u786E\u8BA4\u8981"'+m+'""'+a.mailId+'"\u5417?',title:"\u8B66\u544A",showCancelButton:!0,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){return se({mailId:a.mailId,status:a.status})}).then(()=>{O({message:m+"\u6210\u529F",type:"success"})}).catch(function(){a.status=a.status==="0"?"1":"0"})},A=a=>{const m=a.mailId||l.ids;N({message:'\u662F\u5426\u786E\u8BA4\u5220\u9664\u5C97\u4F4D\u7F16\u53F7\u4E3A"'+m+'"\u7684\u6570\u636E\u9879?',title:"\u8B66\u544A",showCancelButton:!0,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){return re(m).then(()=>{_(),O.success("\u5220\u9664\u6210\u529F")})})},S=a=>{l.ids=a.map(m=>m.mailId),l.single=a.length!=1,l.multiple=!a.length};return Y(()=>{_(),t.getDicts("sys_normal_disable").then(a=>{l.statusOptions=a.data}),t.getDicts("res_mail_category").then(a=>{l.mailOptions=a.data}),t.mittBus.on("onEditResEmailsModule",a=>{_()})}),Z(()=>{t.mittBus.off("onEditResEmailsModule")}),z({debugFormRef:r,editModuleRef:n,handleSelectionChange:S,handleQuery:_,handleCurrentChange:D,handleSizeChange:B,resetQuery:q,mailFormat:p,statusFormat:b,onOpenAddModule:d,onOpenEditModule:E,onTabelRowDel:A,handleStatusChange:w,onOpenDebugModule:v,submitDebug:i,cancelDebug:V},x(l))}},ie={class:"app-container"},me=g(" \u641C\u7D22 "),ce=g(" \u91CD\u7F6E "),pe={class:"card-header"},ge=h("span",{class:"card-header-text"},"\u90AE\u4EF6\u5217\u8868",-1),be=g(" \u65B0\u589E "),_e=g(" \u5220\u9664 "),fe=g(" \u4FEE\u6539 "),he=g(" \u5220\u9664 "),ye=g(" \u8C03\u8BD5 "),Ce={class:"dialog-footer"},Fe=g("\u786E \u5B9A"),De=g("\u53D6 \u6D88");function Be(t,n,r,l,_,q){const D=s("el-option"),B=s("el-select"),b=s("el-form-item"),p=s("SvgIcon"),d=s("el-button"),E=s("el-form"),v=s("el-card"),i=s("el-table-column"),V=s("el-tag"),w=s("el-switch"),A=s("el-popover"),S=s("el-table"),a=s("el-divider"),m=s("el-pagination"),R=s("EditModule"),k=s("el-input"),Q=s("el-dialog"),C=T("auth"),H=T("loading");return c(),M("div",ie,[e(v,{shadow:"always"},{default:o(()=>[e(E,{model:t.queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:o(()=>[e(b,{label:"\u5206\u7C7B",prop:"category"},{default:o(()=>[e(B,{modelValue:t.queryParams.category,"onUpdate:modelValue":n[0]||(n[0]=u=>t.queryParams.category=u),placeholder:"\u5206\u7C7B",clearable:""},{default:o(()=>[(c(!0),M(j,null,L(t.mailOptions,u=>(c(),f(D,{key:u.dictValue,label:u.dictLabel,value:u.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(b,{label:"\u72B6\u6001",prop:"status"},{default:o(()=>[e(B,{modelValue:t.queryParams.status,"onUpdate:modelValue":n[1]||(n[1]=u=>t.queryParams.status=u),placeholder:"\u72B6\u6001",clearable:"",style:{width:"240px"}},{default:o(()=>[(c(!0),M(j,null,L(t.statusOptions,u=>(c(),f(D,{key:u.dictValue,label:u.dictLabel,value:u.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(b,null,{default:o(()=>[e(d,{type:"primary",plain:"",onClick:l.handleQuery},{default:o(()=>[e(p,{name:"elementSearch"}),me]),_:1},8,["onClick"]),e(d,{onClick:l.resetQuery},{default:o(()=>[e(p,{name:"elementRefresh"}),ce]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),e(v,{class:"box-card"},{header:o(()=>[h("div",pe,[ge,h("div",null,[y((c(),f(d,{type:"primary",plain:"",onClick:l.onOpenAddModule},{default:o(()=>[e(p,{name:"elementPlus"}),be]),_:1},8,["onClick"])),[[C,"resource:mail:add"]]),y((c(),f(d,{type:"danger",plain:"",disabled:t.multiple,onClick:l.onTabelRowDel},{default:o(()=>[e(p,{name:"elementDelete"}),_e]),_:1},8,["disabled","onClick"])),[[C,"resource:mail:delete"]])])])]),default:o(()=>[y((c(),f(S,{data:t.tableData,onSelectionChange:l.handleSelectionChange},{default:o(()=>[e(i,{type:"selection",width:"55",align:"center"}),e(i,{label:"\u7F16\u53F7",align:"center",prop:"mailId"}),e(i,{label:"\u5206\u7C7B",align:"center",width:"80",prop:"category"},{default:o(u=>[e(V,{type:u.row.category==="0"?"danger":u.row.category==="0"?"success":"warning","disable-transitions":""},{default:o(()=>[g(te(l.mailFormat(u.row)),1)]),_:2},1032,["type"])]),_:1}),e(i,{label:"\u7528\u6237\u540D\u79F0",align:"center",prop:"from"}),e(i,{label:"\u670D\u52A1\u5668\u5730\u5740",align:"center",width:"250",prop:"host"}),e(i,{label:"\u7AEF\u53E3\u53F7",align:"center",prop:"port"}),e(i,{label:"\u53D1\u4EF6\u4EBA",align:"center",prop:"nickname"}),e(i,{label:"\u72B6\u6001",align:"center"},{default:o(u=>[e(w,{modelValue:u.row.status,"onUpdate:modelValue":F=>u.row.status=F,"active-value":"0","inactive-value":"1",onClick:F=>l.handleStatusChange(u.row)},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:1}),e(i,{label:"\u64CD\u4F5C",align:"center",width:"300","class-name":"small-padding fixed-width"},{default:o(u=>[e(A,{placement:"left"},{reference:o(()=>[e(d,{type:"primary",circle:""},{default:o(()=>[e(p,{name:"elementStar"})]),_:1})]),default:o(()=>[h("div",null,[y((c(),f(d,{text:"",type:"primary",onClick:F=>l.onOpenEditModule(u.row)},{default:o(()=>[e(p,{name:"elementEdit"}),fe]),_:2},1032,["onClick"])),[[C,"resource:mail:edit"]])]),h("div",null,[u.row.parentId!=0?y((c(),f(d,{key:0,text:"",type:"primary",onClick:F=>l.onTabelRowDel(u.row)},{default:o(()=>[e(p,{name:"elementDelete"}),he]),_:2},1032,["onClick"])),[[C,"resource:mail:delete"]]):le("",!0)]),h("div",null,[y((c(),f(d,{text:"",type:"primary",onClick:F=>l.onOpenDebugModule(u.row)},{default:o(()=>[e(p,{name:"elementUploadFilled"}),ye]),_:2},1032,["onClick"])),[[C,"resource:mail:debug"]])])]),_:2},1024)]),_:1})]),_:1},8,["data","onSelectionChange"])),[[H,t.loading]]),y(h("div",null,[e(a),e(m,{background:"",total:t.total,"current-page":t.queryParams.pageNum,"page-size":t.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:l.handleSizeChange,onCurrentChange:l.handleCurrentChange},null,8,["total","current-page","page-size","onSizeChange","onCurrentChange"])],512),[[ae,t.total>0]])]),_:1}),e(R,{ref:"editModuleRef",title:t.title},null,8,["title"]),e(Q,{title:"\u6D4B\u8BD5\u53D1\u9001\u90AE\u4EF6",modelValue:t.debugOpen,"onUpdate:modelValue":n[6]||(n[6]=u=>t.debugOpen=u),width:"769px",center:""},{footer:o(()=>[h("span",Ce,[e(d,{type:"primary",onClick:l.submitDebug},{default:o(()=>[Fe]),_:1},8,["onClick"]),e(d,{onClick:l.cancelDebug},{default:o(()=>[De]),_:1},8,["onClick"])])]),default:o(()=>[e(E,{"label-width":"80px",model:t.debugForm,rules:t.debugRules,ref:"debugFormRef"},{default:o(()=>[e(b,{label:"\u90AE\u7BB1\u7F16\u53F7"},{default:o(()=>[e(k,{modelValue:t.debugForm.mailId,"onUpdate:modelValue":n[2]||(n[2]=u=>t.debugForm.mailId=u),disabled:!0},null,8,["modelValue"])]),_:1}),e(b,{label:"\u8054\u7CFB\u4EBA"},{default:o(()=>[e(k,{placeholder:"\u8BF7\u8F93\u5165\u8981\u53D1\u9001\u7ED9\u8C01",modelValue:t.debugForm.to,"onUpdate:modelValue":n[3]||(n[3]=u=>t.debugForm.to=u)},null,8,["modelValue"])]),_:1}),e(b,{label:"\u53D1\u9001\u4E3B\u9898"},{default:o(()=>[e(k,{placeholder:"\u8BF7\u8F93\u5165\u53D1\u9001\u4E3B\u9898",modelValue:t.debugForm.subject,"onUpdate:modelValue":n[4]||(n[4]=u=>t.debugForm.subject=u)},null,8,["modelValue"])]),_:1}),e(b,{label:"\u53D1\u9001\u5185\u5BB9"},{default:o(()=>[e(k,{type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u53D1\u9001\u5185\u5BB9",modelValue:t.debugForm.body,"onUpdate:modelValue":n[5]||(n[5]=u=>t.debugForm.body=u)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}var ke=K(de,[["render",Be]]);export{ke as default};
