var R=Object.defineProperty;var w=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var B=(n,l,t)=>l in n?R(n,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[l]=t,P=(n,l)=>{for(var t in l||(l={}))Q.call(l,t)&&B(n,t,l[t]);if(w)for(var t of w(l))U.call(l,t)&&B(n,t,l[t]);return n};import{_ as L,H as j,k as H,m as G,P as J,p as W,a as k,h as e,w as o,g as X,N as q,M as Y,r as s,aC as S,o as p,aD as T,F as Z,e as $,f as y,b as m,y as _,i as g,t as A,z as ee}from"./index.1661925429160.js";import{E as te,l as ne,d as ae,e as oe}from"./editModule.16619254291605.js";const le={name:"index",components:{EditModule:te},setup(){const{proxy:n}=X(),l=j(),t=H({loading:!0,ids:[],single:!0,multiple:!0,title:"",tableData:[],total:0,typeOptions:[],queryParams:{pageNum:1,pageSize:10,configName:void 0,configKey:void 0,configType:void 0}}),u=()=>{t.loading=!0,ne(t.queryParams).then(a=>{t.tableData=a.data.data,t.total=a.data.total,t.loading=!1})},D=()=>{t.queryParams.configName=void 0,t.queryParams.configKey=void 0,t.queryParams.configType=void 0,u()},F=(a,i)=>n.selectDictLabel(t.typeOptions,a.configType),h=a=>{a=[],t.title="\u6DFB\u52A0\u914D\u7F6E\u53C2\u6570",l.value.openDialog(a)},f=a=>{t.title="\u4FEE\u6539\u914D\u7F6E\u53C2\u6570",l.value.openDialog(a)},E=a=>{const i=a.configId||t.ids;q({message:'\u662F\u5426\u786E\u8BA4\u5220\u9664\u914D\u7F6E\u53C2\u6570\u7F16\u53F7\u4E3A"'+i+'"\u7684\u6570\u636E\u9879?',title:"\u8B66\u544A",showCancelButton:!0,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){return ae(i).then(()=>{u(),Y.success("\u5220\u9664\u6210\u529F")})})},b=a=>{t.ids=a.map(i=>i.configId),t.single=a.length!=1,t.multiple=!a.length},d=()=>{const a=t.queryParams;q({message:"\u662F\u5426\u786E\u8BA4\u5BFC\u51FA\u6240\u6709\u53C2\u6570\u6570\u636E\u9879?",title:"\u8B66\u544A",showCancelButton:!0,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){return oe(a)}).then(i=>{n.download(i.data)})},c=a=>{t.queryParams.pageSize=a,u()},v=a=>{t.queryParams.pageNum=a,u()};return G(()=>{u(),n.getDicts("sys_yes_no").then(a=>{t.typeOptions=a.data}),n.mittBus.on("onEditPostModule",a=>{u()})}),J(()=>{n.mittBus.off("onEditPostModule")}),P({editModuleRef:l,handleSelectionChange:b,handleSizeChange:c,handleCurrentChange:v,handleQuery:u,resetQuery:D,handleExport:d,onOpenAddModule:h,onOpenEditModule:f,typeFormat:F,onTabelRowDel:E},W(t))}},ue={class:"app-container"},ie=g(" \u641C\u7D22 "),re=g(" \u91CD\u7F6E "),se={class:"card-header"},de=m("span",{class:"card-header-text"},"\u914D\u7F6E\u5217\u8868",-1),ce=g(" \u65B0\u589E "),pe=g(" \u5220\u9664 "),me=g(" \u4FEE\u6539 "),ge=g(" \u5220\u9664 ");function fe(n,l,t,u,D,F){const h=s("el-input"),f=s("el-form-item"),E=s("el-option"),b=s("el-select"),d=s("SvgIcon"),c=s("el-button"),v=s("el-form"),a=s("el-card"),i=s("el-table-column"),M=s("el-tag"),V=s("el-popover"),N=s("el-table"),z=s("el-divider"),K=s("el-pagination"),x=s("EditModule"),C=S("auth"),O=S("loading");return p(),k("div",ue,[e(a,{shadow:"always"},{default:o(()=>[e(v,{model:n.queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:o(()=>[e(f,{label:"\u53C2\u6570\u540D\u79F0",prop:"configName"},{default:o(()=>[e(h,{placeholder:"\u53C2\u6570\u540D\u79F0\u6A21\u7CCA\u67E5\u8BE2",clearable:"",onKeyup:T(u.handleQuery,["enter"]),style:{width:"240px"},modelValue:n.queryParams.configName,"onUpdate:modelValue":l[0]||(l[0]=r=>n.queryParams.configName=r)},null,8,["onKeyup","modelValue"])]),_:1}),e(f,{label:"\u53C2\u6570\u952E\u540D",prop:"configKey"},{default:o(()=>[e(h,{placeholder:"\u53C2\u6570\u952E\u540D\u6A21\u7CCA\u67E5\u8BE2",clearable:"",onKeyup:T(u.handleQuery,["enter"]),style:{width:"240px"},modelValue:n.queryParams.configKey,"onUpdate:modelValue":l[1]||(l[1]=r=>n.queryParams.configKey=r)},null,8,["onKeyup","modelValue"])]),_:1}),e(f,{label:"\u7CFB\u7EDF\u5185\u7F6E",prop:"configType"},{default:o(()=>[e(b,{modelValue:n.queryParams.configType,"onUpdate:modelValue":l[2]||(l[2]=r=>n.queryParams.configType=r),placeholder:"\u7CFB\u7EDF\u5185\u7F6E",clearable:"",style:{width:"240px"}},{default:o(()=>[(p(!0),k(Z,null,$(n.typeOptions,r=>(p(),y(E,{key:r.dictValue,label:r.dictLabel,value:r.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(f,null,{default:o(()=>[e(c,{type:"primary",plain:"",onClick:u.handleQuery},{default:o(()=>[e(d,{name:"elementSearch"}),ie]),_:1},8,["onClick"]),e(c,{onClick:u.resetQuery},{default:o(()=>[e(d,{name:"elementRefresh"}),re]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),e(a,{class:"box-card"},{header:o(()=>[m("div",se,[de,m("div",null,[_((p(),y(c,{type:"primary",plain:"",onClick:u.onOpenAddModule},{default:o(()=>[e(d,{name:"elementPlus"}),ce]),_:1},8,["onClick"])),[[C,"system:config:add"]]),_((p(),y(c,{type:"danger",plain:"",disabled:n.multiple,onClick:u.onTabelRowDel},{default:o(()=>[e(d,{name:"elementDelete"}),pe]),_:1},8,["disabled","onClick"])),[[C,"system:config:delete"]])])])]),default:o(()=>[_((p(),y(N,{data:n.tableData,onSelectionChange:u.handleSelectionChange},{default:o(()=>[e(i,{type:"selection",width:"55",align:"center"}),e(i,{label:"\u53C2\u6570\u4E3B\u952E",align:"center",prop:"configId"}),e(i,{label:"\u53C2\u6570\u540D\u79F0",align:"center",prop:"configName","show-overflow-tooltip":!0}),e(i,{label:"\u53C2\u6570\u952E\u540D",align:"center",prop:"configKey","show-overflow-tooltip":!0}),e(i,{label:"\u53C2\u6570\u952E\u503C",align:"center",prop:"configValue"}),e(i,{label:"\u7CFB\u7EDF\u5185\u7F6E",align:"center",prop:"configType"},{default:o(r=>[e(M,{type:r.row.configType==="1"?"danger":"success","disable-transitions":""},{default:o(()=>[g(A(u.typeFormat(r.row)),1)]),_:2},1032,["type"])]),_:1}),e(i,{label:"\u5907\u6CE8",align:"center",prop:"remark","show-overflow-tooltip":!0}),e(i,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"180"},{default:o(r=>[m("span",null,A(n.dateStrFormat(r.row.createTime)),1)]),_:1}),e(i,{label:"\u64CD\u4F5C",align:"center",width:"200","class-name":"medium-padding fixed-width"},{default:o(r=>[e(V,{placement:"left"},{reference:o(()=>[e(c,{type:"primary",circle:""},{default:o(()=>[e(d,{name:"elementStar"})]),_:1})]),default:o(()=>[m("div",null,[_((p(),y(c,{text:"",type:"primary",onClick:I=>u.onOpenEditModule(r.row)},{default:o(()=>[e(d,{name:"elementEdit"}),me]),_:2},1032,["onClick"])),[[C,"system:config:edit"]])]),m("div",null,[_((p(),y(c,{text:"",type:"primary",onClick:I=>u.onTabelRowDel(r.row)},{default:o(()=>[e(d,{name:"elementDelete"}),ge]),_:2},1032,["onClick"])),[[C,"system:config:delete"]])])]),_:2},1024)]),_:1})]),_:1},8,["data","onSelectionChange"])),[[O,n.loading]]),_(m("div",null,[e(z),e(K,{background:"",total:n.total,"current-page":n.queryParams.pageNum,"page-size":n.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:u.handleSizeChange,onCurrentChange:u.handleCurrentChange},null,8,["total","current-page","page-size","onSizeChange","onCurrentChange"])],512),[[ee,n.total>0]])]),_:1}),e(x,{ref:"editModuleRef",title:n.title},null,8,["title"])])}var Ce=L(le,[["render",fe]]);export{Ce as default};
